# Interview knowledge store

+ [Back](README.md)

## [Servlets](java/SERVLET.md)
## [JSP](java/JSP.md)

## OOP

### Principles

#### Abstraction

+ Определение значимых свойств объекта и исключение не значимых

#### Encapsulation

+ Сокрытие сложности реализации, представляя необходимый интерфейс

#### Inheritance

+ Определение общих свойств и методов для потомков

#### Polymorphism

+ Один интерфейс - множество методов (для разных классов)

+ Динамическое связывание
    + Используя вызов интерфейса мы можем во время выполнения
        менять поведение, подставляя нужную реализацию

### Relationship

#### Inheritance(Is a)

+ When class must have all behavior of another (maybe with changes - redefinition)

#### Association(Has a)

+ Relationship between classes - one two one, one to many, etc

##### Composition

+ Часть не может существовать самостоятельно (создается внутри объекта контейнера)

##### Aggregation

+ Часть может существовать самостоятельно (передается как параметр конструктора или через сеттер)

### Преобразование

+ Восходящее - от потомка к предку, приведение не требуется

+ Нисходящее - от предка к потомку, приведение требуется

### Сигнатура метода

+ Имя метода и его параметры по порядку

+ К сигнатуре НЕ относятся возвращаемое значение и выбрасываемые исключения

### Блоки инициализации

+ Есть статические и нестатические блоки инициализации для
    выполнения действий перед загрузкой класса или созданием
    объекта соответственно
    + Статический блок static{}
    + Нестатический блок {}

### Class types

#### Simple Class
#### Static Nested Class
#### Member Inner Class
#### Local Inner Class
#### Anonymous Inner Class
+ Статический внутренний класс называют вложенным

+ Создаются для доступа к закрытым методам и переменным класса
    если нужна некоторая абстракция внутри только этого класса

## Java Core

### Class loading

+ Загрузчики классов
    + Загрузчик JVM - загружает классы из rt.jar
    + Загрузчик расширений - загружает классы из $JAVAHOME/lib/ext
    + Системный загрузчик - загружает классы из classpath

### Streams

#### Byte Stream

+ InputStream
+ OutputStream

#### Char Stream

+ Reader
+ Writer

### Memory

#### Heap

+ Память для создаваемых экземпляров классов
+ Здесь работает сборщик мусора
+ Все объекты обитают в куче и попадают туда при создании
+ Объект состоит из полей класса и методов
+ В куче выделяется место под сам объект - его поля, в соответствии с их размером

#### Stack

+ LIFO - Последний зашел - первый вышел
+ Используется для хранения данных при работе методов
+ Все методы обитают в стеке и попадают туда при вызове
+ Переменные в методах так же имеют стековую память, так как они локальные
+ Если в методе создается объект, он помещается в кучу, но его ссылка все еще будет находится
    в стеке и после того как метод покинет стек - объект станет жертвой сборщика мусора,
    так как ссылка на объект потеряна

#### Difference between Heap and Stack

+ Куча используется всеми частями приложения а стек только одним потоком
+ Всякий раз, когда создается объект, он всегда помещается в кучу, а ссылка на него
    помещается в стек. Память стека содержит только примитивные локальные переменные и ссылки
    на объекты в куче
+ Объекты в куче могут быть доступны из любой части программы в то время как стековая память
    не может быть доступна для других потоков
+ Управление памятью в стеке осуществляется по схеме LIFO
+ Стековая память существует лишь какое то время работы программы, а память в куче живет
    все время работы
+ Для определения начального и максимального размера кучи используются параметры JVM - Xms, Xmx.
    Размер памяти стека можно определить параметром - Xss
+ Переполнение стека - java.lang.StackOwerflowError, переполнение кучи - java.lang.OutOfMemoryError
+ Размер стековой памяти меньше, работает она быстрее засчет схемы LIFO

#### Structure

+ Память Java
    + Стек
    + Куча
        + Статический контекст
        + Куча
            + Новая Куча
                + Первая Куча (Eden)
                + Выжившая Куча (Survival)
            + Старая Куча

+ Описание
    + Eden Space
        + Выделяется память под все создаваемые объекты
        + При заполнении выполняется быстрая очистка сборщиком мусора
    + Survivor Space
        + Сюда перемещаются объекты из Eden, которые пережили хотя бы одну сборку мусора
        + Время от времени объекты из этой кучи перемещаются в Tenured
    + Tenured Generation
        + Здесь скапливаются долгоживущие объекты (синглтоны, менеджеры ресурсов и проч.)
        + При заполнении выполняется полная сборка мусора major, full collection
            которая обрабатывает все объекты в памяти
    + Permanent Generation
        + Здесь хранится метаинформация используемая JVM (классы, методы и т.д.)

#### GC

+ Алгоритм
    + С некоторой периодичностью или когда не хватает памяти происходит запуск GC
    + Помечает в куче объекты на которые нет ссылок
    + Перемещает объекты, на которые есть ссылки из первой кучи в выжившую
    + Если объектов с ссылками очень много то компанует их
    + Удаляет объекты без ссылок
    + Если не хватает места в выжившей куче - переносит их в старую кучу

### Type Cast

+ Автоматическое - расширение типа
    + byte-short-int-long-float-double
    + наследник-родитель
+ Не автоматическое - сужение
    + необходимо указывать тип вручную

## Override method

+ Возможно ли изменить
    + Модификатор доступа
        + да если расширять
    + Возвращаемый тип
        + да если преобразование автоматическое
    + Тип и количество аргументов
        + нет, в таком случае происходит перегрузка метода
    + Имя аргументов
        + да
    + Изменить порядок или убрать секцию throws
        + да

## AutoBoxing

+ Автоматическое преобразование простых типов в их обертки

## Generics

+ Набор свойств языка, позволяющий определять и использовать обобщенные типы и методы
+ Примером является библиотека Collection - ArrayList<T>

## Method parameters link value rule

+ Примитивы передаются в методы по значению, но для метода создается копия этого значения
    поэтому изменение в методе не повлияет на примитив вне этого метода
+ Объекты в метод передаются по ссылке, т.е. изменение в методе повлечет и изменение вне его

## Exceptions

### Hierarchy

+ Throwable
    + Error
        + Ошибка в работе JVM
    + Exception
        + Ошибка в работе программы
        + RuntimeException
            + unchecked
            + Не предусмотренная ошибка при работе программы
        + Остальные Exception, не унаследованные от RuntimeException
            + checked
            + должны быть обработаны через конструкции throws или try-catch

## Internationalization i18n and localization l10n

+ Интернационализация это способ создания приложения для легкой адаптации интерфейса под
    разные аудитории, говорящие на разных языках
+ Локализация это адаптация интерфейса приложения под несколько языков

## Annotation

+ Метатеги для кода, изменяющие поведение кода

+ Применимы к
    + Пакет
    + Класс
    + Конструктор
    + Метод
    + Поле
    + Параметр
    + Локальная переменная

+ Функции
    + Предоставление доп информации для компилятора
    + Предоставление информацию внешним инструментам для доп действий (генерация кода,
        конфигурация и т.д.)
    + Может использоваться во время выполнения кода

+ Самая частая аннотация - @Override

+ @Retention
    + применима к другим аннотациям
    + указывает жизненный цикл аннотации
+ @Documented
    + маркер интерфейс, который указывает что аннотация должна быть
        задокументирована
+ @Target
    + применима к другим аннотациям и указывает, к каким объектам она
        может быть применена
    + тип объекта определяется из ElementType
        + FIELD
        + LOCAL_VARIABLE
        + и т.д.
+ @Ineherited
    + аннотация маркер для других аннотаций
    + определяет что аннотация будет унаследована классами потомками
+ @Override
    + применяется только к методам
    + проверяет что метод переопределен
+ @Deprecated
    + маркер устаревших объявлений, которые должны быть заменены
+ @SafeVarargs
    + применимо к методам и конструкторам с переменным количеством
        параметров, объявленных как static или final
    + указывает что для передаваемых параметров запрещены небезопасные
        действия
+ @SuppressWarnings
    + подавляет предупреждения компилятора

+ Жизненный цикл аннотации
    + задается RetentionPolicy
    + SOURCE
        + содержатся только в исходном файле и отбрасываются при
            компиляции
    + CLASS
        + сохраняются в файле но недоступны при выполнении
    + RUNTIME
        + сохраняются в файле и доступны во время выполнения

+ Элементы к которым применимы аннотации
    + @Target(ElementType.PACKAGE)
    + @Target(ElementType.TYPE)
    + @Target(ElementType.CONSTRUCTOR)
    + @Target(ElementType.METHOD)
    + @Target(ElementType.FIELD)
    + @Target(ElementType.PARAMETER)
    + @Target(ElementType.LOCAL_VARIABLE)
    + могут быть перечислены через запятую
        + @Target({ElementType.PACKAGE, ElementType.FIELD})

+ Создание аннотации
    + public @interface AnnotationName{String info() default ""}

## JMX

+ Java Management Extensions
+ API для контроля удаленных приложений
+ Ресурсы предоставляются MBean(управляемый Java Bean)

+ Выгоды
    + Простота реализации
        + Архитектура основана на понятии "сервер управляемых объектов"
    + Масштабируемость
        + Службы агентов JMX устанавливаются в виде plug-in ов
        + Компонетная система
    + Возможность расширения
    + Концентрация на управлении приложениями

+ Features
    + Event notification позволяет MBean компонентам общаться друг с другом
        а так же с сервером управления, передавая свое состояние
    + Monitor Service
    + Timer Service посылает уведомления с учетом временного промежутка
    + M-let Service может создавать и регистрировать экземпляры MBean
        серверов
        + Список MBean компонентов и имен из классов определяются в m-let
            файле с помощью MLET меток

+ MBean
    + Java объекты которые реализуют определенный интерфейс
    + у этих объектов могут быть
        + поля
        + методы
        + извещения
        + конструкторы
    + типы
        + Standard MBeans
            + Самые простые бины, их управляющий интерфейс
                определяется набором методов
        + Dynamic MBeans
            + Реализуют специализированные интерфейс
                который делает их доступными во время выполнения
        + Open MBeans
            + Dynamic MBeans, которые используют только основные
                типы данных для универсальности использования
        + Model MBeans
            + Dynamic MBeans, которые полностью конфигурируемы и
                могут показать свое описание во время исполнения,
                что то вроде reflection
+ MBean server
    + Реестр объектов MBean
    + Не дает прямых ссылок
    + Регистрировать MBean могут
        + Другой MBean
        + Сам агент
        + Удаленное приложение через сервисы
    + При регистрации дается уникальное имя, по которому будет осуществлен
        доступ

## Java Security

+ Механизмы
    + Структурные функциональные возможности языка(проверки в коде)
    + Средства контроля доступа, определяющий возможные действия для кода
        + Доступ к файлам
        + Работа с сетью
        + И т.д.
    + Механизм цифровой подписи для проверки автора кода или пользователя
        программы

+ Проверки верификатора байт кода
    + инициализация переменных перед их использованием
    + согласование типов ссылок при вызове метода
    + соблюдение правил доступа к закрытым данным и методам
    + доступ к локальным переменным в стеке выполнения программы
    + отсутствие переполнения стека

+ Диспечер защиты в Java
    + Класс, проверяющий что позволено делать коду
    + Некоторые проверки
        + Создание нового загрузчика классов
        + Выход из виртуальной машины
        + Получение доступа к члену другого класса через
            рефлексию
        + Получение доступа к файлу
        + Установление соединение через сокет
        + Запуск задания на печать
        + Получения доступа к системному буферу обмена
        + Получение доступа к очереди событий в AWT
        + Обращение к окну верхнего уровня

## JAAS

+ Java Authentification and Authorization Service

+ API для интеграции средств аутентификации

## Collections

+ Хранилища и контейнеры для различных объектов формирующих структуру данных
+ Базовые операции
    + Добавление
    + Удаление
    + Изменение

+ Основные интерфейсы
    + List
        + Хранит упорядоченные элементы
        + ArrayList
            + Приемущество в навигации по элементам
        + Vector
            + Синхронизирован, поэтому в одном потоке работает
                медленнее других
        + LinkedList
            + Приемущество во вставке и удалении элементов
    + Set
        + Хранит неповторяющийся набор элементов
        + HashSet
            + Упорядочивает элементы по их hash значению
        + TreeSet
            + Упорядочивает элементы по их значениям
        + LinkedHashSet
            + Хранит элементы в порядке их добавления
        + SortedSet
    + Queue
        + PriorityQueue
    + Map
        + Хранит значения по ключам
        + HashTable устаревшая
        + HashMap располагает элементы по их hash значению
        + TreeMap элементы хранятся в отсортированном порядке
        + LinkedHashMap элементы хранятся в порядке вставки
    + Синхронизировать несинхронизированные коллекции можно
        методом Collections.synchronizedMap или
        Collections.synchronizedList ...

+ LinkedList vs ArrayList
    + Linked двунаправленный список
        + Используется если предполагается большое число
            операций вставки удаления
    + Array массив
        + Быстрее проходит сортировка
+ Vector vs ArrayList
    + Vector синхронизирован

+ Equals and HashCode

    + Для сравнения элементов коллекций используются методы equals() и hashcode()
    + Если переопределен метод equals то hashcode тоже должен быть переопределен
    + Если два объекта эквивалентны то их hashcode должен быть одинаковым

+ Map is not collection

    + List и Set это набор объектов
    + Map это набор пар ключ-значение

+ Iterator это объект для перебора элементов коллекции

+ Все коллекции из java.util реализуют интерфейс Collection,
    который, в свою очередь, расширяет интерфейс Iterable,
    в котором есть всего один метод Iterator iterator()

+ Map
    + вернуть все ключи - keySet()
    + вернуть все значения - values()
    + вернуть все пары ключ-значения - entrySet()

+ Collection to Array
    + toArray()

+ Iterable and Iterator
    + Itarable содержит один метод iterator, возвращающий Iterator
        объекта
+ Iterable Iterator ForEach
    + Мы можем использовать объекты расширяющие интерфейс Iterable
        в конструкции foreach
+ Iterator.next() without Iterator.hasNext()
    + Если следующий элемент не будет присутствовать то возникнет
        исключение - NoSuchElementException
+ Iterator.remove()
    + Может быть вызван только после next()
    + иначе - IllegalStateException()
+ Collection.remove() after Iterator getting
    + При модификации коллекции после получения итератора
        возникнет исключение - ConcurrentModificationException
+ ArrayList.elementData.lenght vs ArrayList.size()
    + elementData.lenght это размерность, которая всегда больше чем
        реальный размер
+ LinkedList
    + Двусвязный список
    + Каждый элемент хранит ссылку на предыдущий и следующий элемент

+ Время работы методов коллекций
    + contain() для LinkedList
        + O(n) время поиска пропорционально количество элементов
    + contain() для ArrayList
        + O(n)
    + add() LinkedList
        + O(n)
    + addFirst() addLast() LinkedList
        + O(1)
    + add() ArrayList
        + O(1)
        + если размероности не хватает то приходится создавать новый
            массив(размерности на 1.5 больше) а следовательно - O(n)

## Servlet

+ Сервелет это программа расширяющая возможности веб сервера

+ Структура веб проекта
    + src/main/java - классы
    + src/main/resources - ресурсы
    + src/main/filters - фильтры ресурсов
    + src/main/webapp - исходные файлы веб приложенния
    + src/test/java - тесты
    + src/test/resources - ресурсы для тестов
    + src/test/filters - фильтры ресурсов для тестов
    + src/it - интеграционные тесты
    + src/assembly - дескрипторы сборки
    + src/site - веб сайт приложения

+ Контейнер сервлетов
    + Программа управляющая жизненным циклом сервлетов
    + Может быть самостоятельным веб сервером
    + Посредник между сервлетами и сервером приложений

+ Жизненный цикл сервлета
    + init()
    + service() пока сервлет работает
    + destroy()

+ sendRedirect() and forward()
    + sendRedirect() для вызова JSP по абсолютному пути
        + Создается новый объект Request
    + forward() для вызова JSP по относительному пути
        + используется уже сущесвующий объект Request
+ Filter
    + Модифицирует заголовок и содержимое запроса перед
        обработкой сервлетом, JSP и т.п.
    + Сервлетные фильтры могут
        + перехватить инициализацию сервлета
        + определить содержание запроса прежде инициализации
            сервлета
        + модифицировать заголовки и данные запроса
        + модифицировать заголовки и данные ответа
        + перехватить инициализацию сервлета после обращения
            к сервлету
    + Интерфейс
        + javax.servlet.Filter
            + init()
            + destroy()
            + doFilter()

+ Слушатели контекста и сессий 
    + Позволяют отслеживать инициализацию, уничтожение, изменение
    + Классы
        + ServletRequestListener
        + ServletRequestEvent
        + ServletRequestAttributeListener
        + ServletRequestAttributeEvent
    
